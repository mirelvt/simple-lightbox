var mvt_lightbox=function(){"use strict";function lightBox(container){let current_photo,img,target;const thumbs_list=container.querySelector(".mvt-thumbs-list"),thumbs=container.querySelectorAll("a"),lightbox=container.querySelector(".mvt-lightbox"),img_list=lightbox.querySelector(".mvt-img-list"),images=img_list.querySelectorAll("img"),nav_next=lightbox.querySelector(".lightbox-nav-next"),nav_prev=lightbox.querySelector(".lightbox-nav-prev");(function(){lightbox.querySelector(".mvt-btn-close").addEventListener("click",closeLightBox);document.addEventListener("keyup",keyNavigation);nav_next.addEventListener("click",navLightBoxClick);nav_prev.addEventListener("click",navLightBoxClick);for(let i=0;i<thumbs.length;i++){const elm=thumbs[i];elm.setAttribute("data-target","image-"+i);elm.addEventListener("click",onThumbClick);elm.addEventListener("keyup",onKeyThumbClick)}for(let i=0;i<images.length;i++){const elm=images[i];elm.setAttribute("data-id","image-"+i)}})();function onThumbClick(evt){evt.preventDefault();target=evt.currentTarget.getAttribute("data-target");showLightBox(target)}function onKeyThumbClick(evt){target=evt.currentTarget.getAttribute("data-target");if(evt.keyCode==13||evt.keyCode==32)showLightBox(target)}function showLightBox(target){lightbox.setAttribute("data-show-id",target);lightbox.classList.remove("fade-out");lightbox.classList.add("show");document.body.classList.add("lightbox-active");togglePhoto(target)}function togglePhoto(target){if(current_photo){img.classList.remove("current-img");current_photo=target;img=img_list.querySelector(`[data-id="${target}"]`);img.classList.add("current-img")}else{current_photo=target;img=img_list.querySelector(`[data-id="${target}"]`);img.classList.add("current-img")}toggleLightBoxNav(current_photo)}function toggleLightBoxNav(current){const current_img=lightbox.querySelector(`[data-id="${current}"]`);if(current_img==img_list.lastElementChild){nav_prev.classList.remove("no-display");nav_next.classList.add("no-display")}else if(current_img==img_list.firstElementChild){nav_next.classList.remove("no-display");nav_prev.classList.add("no-display")}else{nav_prev.classList.remove("no-display");nav_next.classList.remove("no-display")}}function closeLightBox(){lightbox.classList.remove("show");lightbox.classList.add("fade-out");img.classList.remove("current-img");document.body.classList.remove("lightbox-active")}function keyNavigation(evt){const the_key=evt.keyCode;if(current_photo&&the_key==39||current_photo&&the_key==37)prevNextKeyNav(the_key);if(the_key==27)closeLightBox()}function prevNextKeyNav(the_key){const current=lightbox.querySelector(`[data-id="${current_photo}"]`),next=current.nextElementSibling,prev=current.previousElementSibling;let next_elm;if(the_key==39&&next)next_elm=next.getAttribute("data-id");if(the_key==37&&prev)next_elm=prev.getAttribute("data-id");if(next_elm)navLightBox(next_elm)}function navLightBoxClick(evt){const current=lightbox.querySelector(`[data-id="${current_photo}"]`),next=current.nextElementSibling,prev=current.previousElementSibling;const next_elm=evt.currentTarget.classList.contains("lightbox-nav-next")?next.getAttribute("data-id"):prev.getAttribute("data-id");navLightBox(next_elm)}function navLightBox(next){lightbox.setAttribute("data-show-id",next);const next_id=lightbox.getAttribute("data-show-id");togglePhoto(next_id)}}return lightBox}();